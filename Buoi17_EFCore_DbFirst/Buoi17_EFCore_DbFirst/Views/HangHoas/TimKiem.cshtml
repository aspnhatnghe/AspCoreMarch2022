@model IEnumerable<Buoi17_EFCore_DbFirst.ViewModels.KetQuaTimKiemVM>
@{
    ViewData["Title"] = "TimKiem";
    // Phân biệt IQueryable vs IEnumerable
}

<h1>Tìm kiếm</h1>
<form asp-action="TimKiem">
    Cần tìm: <input name="Keyword" placeholder="search" />
    Giá từ: <input name="FromPrice" type="number" step="0.01" min="0" />
    Giá đến: <input name="ToPrice" type="number" step="0.01" min="0" />
    <button class="btn btn-primary">Tìm</button>
</form>

@if (Model != null)
{
    <h2>Kết quả tìm kiếm</h2>
    <h4 class="text-danger">Có @Model.Count() hàng hóa</h4>
    <table id="result" class="table table-bordered table-hover">
        <thead>
            <tr>
                <th>Tên hàng hòa</th>
                <th>Đơn giá</th>
                <th>Ngày sản xuất</th>
                <th>Loại</th>
            </tr>
        </thead>
        <tbody>
            @foreach (var item in Model)
            {
                <tr>
                    <td>@item.TenHh</td>
                    <td>@item.DonGia.ToString("#,##0.00")</td>
                    <td>@item.NgaySX.ToString("dd/MM/yyyy")</td>
                    <td>@item.Loai</td>
                </tr>
            }
        </tbody>
    </table>
}
<link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.11.5/css/jquery.dataTables.css">
@section Scripts{ 
    <script type="text/javascript" charset="utf8" src="https://cdn.datatables.net/1.11.5/js/jquery.dataTables.js"></script>
    <script>
        $(function () {
            $("#result").DataTable({
                "order": [[3, "desc"], [1, "asc"]]
            });
        });
    </script>
}